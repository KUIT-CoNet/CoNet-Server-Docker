FROM openjdk:17-jdk
EXPOSE 9000
ARG JAR_FILE=build/libs/*-SNAPSHOT.jar
COPY ${JAR_FILE} app.jar
ARG ACTIVE_PROFILE
ENV ACTIVE_PROFILE=${ACTIVE_PROFILE}
ARG DATASOURCE_URL_DEV
ENV DATASOURCE_URL_DEV=${DATASOURCE_URL_DEV}
ARG DATASOURCE_USERNAME
ENV DATASOURCE_USERNAME=${DATASOURCE_USERNAME}
ARG DATASOURCE_PASSWORD
ENV DATASOURCE_PASSWORD=${DATASOURCE_PASSWORD}
ARG ACCESSTOKEN_EXPIREDDATE
ENV ACCESSTOKEN_EXPIREDDATE=${ACCESSTOKEN_EXPIREDDATE}
ARG JWT_EXPIRED_IN
ENV JWT_EXPIRED_IN=${JWT_EXPIRED_IN}
ARG JWT_SECRET_KEY
ENV JWT_SECRET_KEY=${JWT_SECRET_KEY}
ARG DATA_REDIS_HOST
ENV DATA_REDIS_HOST=${DATA_REDIS_HOST}
ARG DATA_REDIS_PORT
ENV DATA_REDIS_PORT=${DATA_REDIS_PORT}
ARG OAUTH_APPLE_CLIENT_ID
ENV OAUTH_APPLE_CLIENT_ID=${OAUTH_APPLE_CLIENT_ID}
ARG OAUTH_APPLE_NONCE
ENV OAUTH_APPLE_NONCE=${OAUTH_APPLE_NONCE}
ARG OAUTH_KAKAO_CLIENT_ID
ENV OAUTH_KAKAO_CLIENT_ID=${OAUTH_KAKAO_CLIENT_ID}
ARG AWS_S3_BUCKET_NAME
ENV AWS_S3_BUCKET_NAME=${AWS_S3_BUCKET_NAME}
ARG AWS_S3_ACCESS_KEY
ENV AWS_S3_ACCESS_KEY=${AWS_S3_ACCESS_KEY}
ARG AWS_S3_SECRET_KEY
ENV AWS_S3_SECRET_KEY=${AWS_S3_SECRET_KEY}
ARG USER_DEFAULTIMAGE
ENV USER_DEFAULTIMAGE=${USER_DEFAULTIMAGE}
ENTRYPOINT [ \
"java", \
"-jar", \
"-Duser.timezone=Asia/Seoul", \
"app.jar" \
]